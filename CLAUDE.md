# ConicIP.jl

Pure-Julia conic interior-point solver for quadratic programs with linear, second-order cone, and semidefinite constraints.

## Project Info

- GitHub: `MPF-Optimization-Laboratory/ConicIP.jl`
- Julia compat: `≥ 1.10`
- Key deps: JuMP, MathOptInterface, WoodburyMatrices

## Architecture

- `src/ConicIP.jl` — Main module, core `conicIP()` solver, type definitions (`v4x1`, `VecCongurance`, `Solution`)
- `src/blockmatrices.jl` — Block diagonal matrix type (`Block`)
- `src/kktsolvers.jl` — KKT system solvers (`kktsolver_qr`, `kktsolver_sparse`, `kktsolver_2x2`, `pivot`)
- `src/preprocessor.jl` — Redundancy removal (`imcols`, `preprocess_conicIP`)
- `src/MOI_wrapper.jl` — MathOptInterface wrapper (`Optimizer`)

## Key Design Patterns

- The solver works with `Matrix` (n×1) columns rather than `Vector` for `c`, `b`, `d`
- Cone dimensions specified as `[("R", n), ("Q", m), ("S", k)]` tuples
- Block diagonal matrices (`Block`) hold per-cone scaling matrices (Diagonal, SymWoodbury, VecCongurance)
- Nesterov-Todd scaling computed per cone block
- `Id(n)` creates n×n identity as `Diagonal(ones(n))`
- `v4x1` struct fields alias passed matrices (no copy) — buffer reuse requires lifetime analysis
- Local closures `÷(x,y)` and `∘(x,y)` are cone group division/product; in-place variants are `cone_div!`/`cone_prod!`
- Julia gotcha: Unicode operators (`÷`, `∘`) cannot have `!` appended — `÷!` is a parse error

## Running Tests

```
julia --project -e 'using Pkg; Pkg.test()'
```

- Tests in `test/runtests.jl`, test data generated by `test/testdata.jl`
- Test project has its own `test/Project.toml` for test-only deps

## Documentation

- Built with Documenter.jl: `docs/make.jl`
- Docs worktree at `.worktrees/docs` (branch `docs/documenter-setup`)
- Build locally: `julia --project=docs docs/make.jl`
- CI deploys to GitHub Pages via `.github/workflows/Documentation.yml`

## Benchmarking

- `benchmark/profile.jl` — profiling script (timing, allocation, type stability)
- `benchmark/report.md` — performance analysis and improvement roadmap
- Run: `julia --project -e 'include("benchmark/profile.jl")'`

## Git Workflow

- Feature branches use worktrees in `.worktrees/` directory
- `.worktrees/` is gitignored
